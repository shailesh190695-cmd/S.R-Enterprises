<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S.R ENTERPRISES | Professional Billing</title>
    <style>
        :root { --bg: #0f172a; --card: #1e293b; --gold: #fbbf24; --green: #22c55e; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: white; margin: 0; padding: 10px; }
        
        /* App UI Design */
        .app-card { max-width: 480px; margin: auto; background: var(--card); border-radius: 20px; padding: 20px; border: 1px solid #334155; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .header { border-bottom: 2px solid var(--gold); margin-bottom: 20px; padding-bottom: 15px; display: flex; justify-content: space-between; align-items: center; }
        .header h1 { color: var(--gold); margin: 0; font-size: 22px; text-transform: uppercase; }
        .inv-badge { background: var(--gold); color: black; padding: 4px 10px; border-radius: 6px; font-weight: bold; font-size: 14px; }
        
        label { display: block; color: var(--gold); font-size: 11px; font-weight: bold; margin-bottom: 5px; text-transform: uppercase; }
        input, select { width: 100%; padding: 12px; margin-bottom: 12px; border-radius: 8px; border: 1px solid #475569; background: #0f172a; color: white; box-sizing: border-box; }
        
        .row { display: flex; gap: 10px; }
        .total-section { background: rgba(0,0,0,0.2); padding: 15px; border-radius: 12px; margin: 15px 0; border: 1px dashed var(--gold); }
        .total-row { display: flex; justify-content: space-between; margin-bottom: 5px; }
        .grand-total { border-top: 1px solid #475569; padding-top: 10px; font-size: 24px; font-weight: bold; color: var(--gold); }

        .btn-group { display: flex; flex-direction: column; gap: 10px; margin-top: 20px; }
        .btn { padding: 16px; border-radius: 12px; border: none; font-weight: bold; cursor: pointer; font-size: 16px; display: flex; align-items: center; justify-content: center; gap: 8px; }
        .btn-wa { background: var(--green); color: white; }
        .btn-print { background: var(--gold); color: black; }

        /* PRINT STYLING - Ekdum Professional */
        @media print {
            @page { margin: 1cm; }
            body { background: white !important; color: black !important; padding: 40px !important; }
            .app-card { border: none; box-shadow: none; max-width: 100%; width: 100%; padding: 0; margin-top: 50px !important; }
            .btn-group, label, input, select, .no-print, .header p { display: none !important; }
            .print-only { display: block !important; }
            .print-header { border-bottom: 2px solid black; padding-bottom: 15px; margin-bottom: 30px; }
            .total-section { border: 1px solid black; color: black; background: none; }
            .grand-total { color: black !important; }
        }
        .print-only { display: none; color: black; }
    </style>
</head>
<body>

<div class="app-card">
    <div class="header">
        <div>
            <h1>S.R Enterprises</h1>
            <p style="font-size: 10px; color: #94a3b8; margin:0;">Fusing Machine Specialist</p>
        </div>
        <div class="inv-badge" id="invDisplay">INV-1</div>
    </div>

    <div class="print-only print-header">
        <div style="display: flex; justify-content: space-between; align-items: flex-end;">
            <div>
                <h1 style="font-size: 32px; margin: 0; color: black;">TAX INVOICE</h1>
                <p style="margin: 5px 0; font-size: 14px;"><b>Prop:</b> Hariram Sitaram Rajbhar | <b>Mob:</b> 9326113988</p>
            </div>
            <div style="text-align: right; font-size: 14px;">
                <b id="pInvNo">Invoice No: SR-1</b><br>
                <span id="pDate">Date: 31/01/2026</span>
            </div>
        </div>
    </div>

    <label>Customer Details</label>
    <input type="text" id="cName" placeholder="Customer Name">
    <input type="text" id="cAddr" placeholder="Address / City">

    <label>Machine & Service Details</label>
    <input type="text" id="item" placeholder="e.g. Hashima Repair / Service">

    <div class="row">
        <div style="flex:2"><label>Rate (‚Çπ)</label><input type="number" id="rate" oninput="calculate()"></div>
        <div style="flex:1"><label>Qty</label><input type="number" id="qty" value="1" oninput="calculate()"></div>
    </div>

    <div class="row">
        <div style="flex:1"><label>GST (%)</label>
            <select id="gst" onchange="calculate()">
                <option value="0">0%</option>
                <option value="18" selected>18%</option>
            </select>
        </div>
        <div style="flex:1"><label>Discount (‚Çπ)</label><input type="number" id="disc" value="0" oninput="calculate()"></div>
    </div>

    <div class="total-section">
        <div class="total-row"><span>Base Amount:</span><span id="base">‚Çπ0.00</span></div>
        <div class="total-row"><span>Tax (GST):</span><span id="tax">‚Çπ0.00</span></div>
        <div class="total-row"><span>Discount:</span><span id="ds">‚Çπ0.00</span></div>
        <div class="grand-total"><div class="total-row"><span>TOTAL:</span><span id="total">‚Çπ0.00</span></div></div>
    </div>

    <div class="print-only" style="margin-top: 40px; border-top: 1px solid #eee; padding-top: 20px;">
        <div style="display: flex; gap: 50px; align-items: center;">
            <div style="text-align: center;">
                <p style="font-size: 12px; font-weight: bold; margin-bottom: 5px;">SCAN TO PAY</p>
                <img src="https://api.qrserver.com/v1/create-qr-code/?size=120x120&data=upi://pay?pa=7021733860@okbizaxis%26pn=Hariram%20Sitaram%20Rajbhar" width="120">
            </div>
            <div style="font-size: 14px; line-height: 1.8;">
                <h3 style="margin:0 0 10px 0; border-bottom: 1px solid #000; display: inline-block;">BANK ACCOUNT DETAILS:</h3><br>
                <b>Account Holder:</b> Hariram Sitaram Rajbhar<br>
                <b>UPI ID:</b> 7021733860@okbizaxis<br>
                <b>Bank:</b> [Bank Name Likhein]<br>
                <b>A/C No:</b> [A/C Number Likhein]<br>
                <b>IFSC:</b> [IFSC Code Likhein]
            </div>
        </div>
    </div>

    <div class="btn-group">
        <button class="btn btn-wa" onclick="sendWA()">üì≤ SEND BILL & SAVE</button>
        <button class="btn btn-print" onclick="window.print()">üñ®Ô∏è PRINT / SAVE PDF</button>
    </div>
</div>

<script>
    const scriptURL = 'https://script.google.com/macros/s/AKfycbwxyLkLvxrvZCTQlprdm3ekBdhuEmWXpsWsJ5a6-P9TYntcCBlo_8SCVpsYNvyQoVzG/exec';

    // Sequence Generator Logic
    let lastInv = localStorage.getItem('sr_inv_no') || 100; // 100 se shuru hoga
    let currentInv = parseInt(lastInv) + 1;
    let invID = "SR-" + currentInv;

    document.getElementById('invDisplay').innerText = invID;
    document.getElementById('pInvNo').innerText = "Invoice No: " + invID;
    document.getElementById('pDate').innerText = "Date: " + new Date().toLocaleDateString('en-IN');

    function calculate() {
        let r = parseFloat(document.getElementById('rate').value) || 0;
        let q = parseFloat(document.getElementById('qty').value) || 0;
        let g = parseFloat(document.getElementById('gst').value) || 0;
        let d = parseFloat(document.getElementById('disc').value) || 0;

        let b = r * q;
        let t = (b * g) / 100;
        let final = (b + t) - d;

        document.getElementById('base').innerText = "‚Çπ" + b.toFixed(2);
        document.getElementById('tax').innerText = "‚Çπ" + t.toFixed(2);
        document.getElementById('ds').innerText = "‚Çπ" + d.toFixed(2);
        document.getElementById('total').innerText = "‚Çπ" + final.toFixed(2);
        return final;
    }

    function sendWA() {
        let name = document.getElementById('cName').value;
        let item = document.getElementById('item').value;
        let finalVal = calculate();

        if(!name || !item || finalVal <= 0) { alert("Details bhariye Shailesh ji!"); return; }

        // Save Current Invoice No
        localStorage.setItem('sr_inv_no', currentInv);

        // Google Sheet
        fetch(scriptURL, { method: 'POST', mode: 'no-cors', body: JSON.stringify({ invNo: invID, custName: name, item: item, total: finalVal }) });

        // WhatsApp to 9326113988
        let msg = `*S.R ENTERPRISES*%0A*Invoice:* ${invID}%0A*Cust:* ${name}%0A*Total:* ‚Çπ${finalVal.toFixed(2)}%0A--------------------------%0A*UPI:* 7021733860@okbizaxis`;
        window.open(`https://wa.me/919326113988?text=${msg}`);
        
        setTimeout(() => { location.reload(); }, 2000);
    }
</script>

</body>
        </html>
    
