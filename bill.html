<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S.R ENTERPRISES | Billing System</title>
    <style>
        :root { --bg: #0f172a; --card: #1e293b; --gold: #fbbf24; --green: #22c55e; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: white; margin: 0; padding: 15px; }
        .app-card { max-width: 500px; margin: auto; background: var(--card); border-radius: 15px; padding: 20px; border: 1px solid #334155; }
        .header { border-bottom: 2px solid var(--gold); margin-bottom: 20px; padding-bottom: 10px; }
        .header h1 { color: var(--gold); margin: 0; font-size: 22px; }
        
        .input-group { margin-bottom: 15px; }
        label { display: block; color: var(--gold); font-size: 11px; font-weight: bold; margin-bottom: 5px; text-transform: uppercase; }
        input, select { width: 100%; padding: 10px; border-radius: 6px; border: 1px solid #475569; background: #0f172a; color: white; box-sizing: border-box; }
        
        .row { display: flex; gap: 10px; margin-bottom: 10px; }
        .total-box { text-align: center; border: 1px dashed var(--gold); padding: 15px; border-radius: 10px; margin: 15px 0; }
        .grand-total { font-size: 24px; font-weight: bold; color: var(--gold); }

        .btn-group { display: flex; gap: 10px; margin-top: 20px; }
        .btn { flex: 1; padding: 15px; border-radius: 10px; border: none; font-weight: bold; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 5px; }
        .btn-wa { background: var(--green); color: white; }
        .btn-print { background: var(--gold); color: black; }

        /* PRINT SETTINGS */
        @media print {
            body { background: white !important; color: black !important; padding: 40px !important; }
            .app-card { border: none; box-shadow: none; width: 100%; max-width: 100%; padding: 0; margin-top: 20px !important; }
            .btn-group, input, select, label, .no-print { display: none !important; }
            .print-only { display: block !important; }
            .print-header { text-align: left; border-bottom: 2px solid black; margin-bottom: 20px; padding-bottom: 10px; }
            .total-box { border: 1px solid black; color: black; }
        }
        .print-only { display: none; color: black; }
    </style>
</head>
<body>

<div class="app-card">
    <div class="header">
        <h1>S.R ENTERPRISES</h1>
        <p style="font-size: 10px; color: #94a3b8; margin: 5px 0 0 0;">FUSING MACHINE SPECIALIST</p>
    </div>

    <div class="print-only print-header">
        <h1 style="font-size: 30px;">INVOICE / BILL</h1>
        <p>Prop: Hariram Sitaram Rajbhar | Contact: 9326113988</p>
    </div>

    <div class="input-group">
        <label>Customer Name</label>
        <input type="text" id="custName" placeholder="Full Name">
    </div>
    <div class="input-group">
        <label>Address</label>
        <input type="text" id="custAddr" placeholder="Customer Address">
    </div>

    <div class="row">
        <div style="flex:2"><label>Machine Name</label><input type="text" id="machine" placeholder="Hashima / Oshima"></div>
        <div style="flex:2"><label>Job Type</label><input type="text" id="job" placeholder="Repairing / Service"></div>
    </div>

    <div class="row">
        <div style="flex:2"><label>Rate (‚Çπ)</label><input type="number" id="rate" oninput="calc()"></div>
        <div style="flex:1"><label>Qty</label><input type="number" id="qty" value="1" oninput="calc()"></div>
    </div>

    <div class="row">
        <div style="flex:1"><label>GST (%)</label>
            <select id="gst" onchange="calc()">
                <option value="0">0%</option>
                <option value="18">18%</option>
            </select>
        </div>
        <div style="flex:1"><label>Discount (‚Çπ)</label><input type="number" id="disc" value="0" oninput="calc()"></div>
    </div>

    <div class="total-box">
        <span style="font-size: 14px;">GRAND TOTAL</span>
        <div class="grand-total" id="totalDisplay">‚Çπ 0.00</div>
    </div>

    <div class="print-only" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
        <div style="display: flex; gap: 40px; align-items: center;">
            <div style="text-align: center;">
                <p style="font-size: 12px; font-weight: bold;">SCAN TO PAY</p>
                <img src="https://api.qrserver.com/v1/create-qr-code/?size=120x120&data=upi://pay?pa=7021733860@okbizaxis%26pn=Hariram%20Sitaram%20Rajbhar" width="120">
            </div>
            <div style="font-size: 14px; line-height: 1.8;">
                <h3 style="margin:0 0 10px 0;">BANK DETAILS:</h3>
                <b>A/C Holder:</b> Hariram Sitaram Rajbhar<br>
                <b>UPI ID:</b> 7021733860@okbizaxis<br>
                <b>Bank Name:</b> [Bank Name Likhein]<br>
                <b>A/C No:</b> [Number Likhein]<br>
                <b>IFSC:</b> [IFSC Likhein]
            </div>
        </div>
    </div>

    <div class="btn-group">
        <button class="btn btn-wa" onclick="sendWA()">üì≤ WHATSAPP BILL</button>
        <button class="btn btn-print" onclick="window.print()">üñ®Ô∏è PRINT / SAVE PDF</button>
    </div>
</div>

<script>
    const scriptURL = 'https://script.google.com/macros/s/AKfycbwxyLkLvxrvZCTQlprdm3ekBdhuEmWXpsWsJ5a6-P9TYntcCBlo_8SCVpsYNvyQoVzG/exec';

    function calc() {
        let r = parseFloat(document.getElementById('rate').value) || 0;
        let q = parseFloat(document.getElementById('qty').value) || 0;
        let g = parseFloat(document.getElementById('gst').value) || 0;
        let d = parseFloat(document.getElementById('disc').value) || 0;

        let base = r * q;
        let tax = (base * g) / 100;
        let total = (base + tax) - d;

        document.getElementById('totalDisplay').innerText = "‚Çπ " + total.toFixed(2);
        return { base, tax, total, disc: d, gst: g };
    }

    function sendWA() {
        let name = document.getElementById('custName').value;
        let machine = document.getElementById('machine').value;
        let v = calc();

        if(!name || !machine || v.base == 0) { alert("Details bhariye Shailesh ji!"); return; }

        // Sheet Save
        fetch(scriptURL, { method: 'POST', mode: 'no-cors', body: JSON.stringify({ custName: name, item: machine, total: v.total, type: "GST BILL" }) });

        // WhatsApp to Support Number 9326113988
        let msg = `*S.R ENTERPRISES*%0A--------------------------%0A*Cust:* ${name}%0A*Machine:* ${machine}%0A*Total:* ‚Çπ${v.total}%0A--------------------------%0A*UPI:* 7021733860@okbizaxis`;
        window.open(`https://wa.me/919326113988?text=${msg}`);
    }
</script>

</body>
</html>
