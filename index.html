<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S.R ENTERPRISES | MASTER ERP</title>
    <style>
        :root { --bg: #0b1120; --card: #1e293b; --gold: #fbbf24; --green: #22c55e; --blue: #3b82f6; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: white; margin: 0; padding: 0; }
        .no-print { display: block; }
        .section { display: none; padding: 15px; }
        .active { display: block; }

        /* Amazon Shop */
        .shop-header { background: #131921; padding: 15px; text-align: center; border-bottom: 3px solid var(--gold); cursor:pointer; }
        .product-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; padding: 10px; }
        .p-card { background: var(--card); border-radius: 10px; padding: 10px; border: 1px solid #334155; text-align: center; }
        .buy-btn { background: var(--gold); color: black; border: none; width: 100%; padding: 8px; border-radius: 5px; font-weight: bold; cursor: pointer; }

        /* Excel Table */
        .excel-table { width: 100%; border-collapse: collapse; background: white; color: black; font-size: 11px; margin-top: 10px; }
        .excel-table th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
        
        @media print {
            .no-print, button { display: none !important; }
            .section { display: block !important; background: white; color: black; }
            .excel-table { width: 100%; border: 1px solid black; }
        }
    </style>
</head>
<body>

<div id="shopPage" class="active no-print">
    <div class="shop-header" onclick="adminLogin()">
        <h1 style="color:var(--gold); margin:0;">S.R ENTERPRISES</h1>
        <p style="font-size:10px; color:#ccc;">CLICK FOR ADMIN LOGIN</p>
    </div>
    <div class="product-grid" id="mainCatalog"></div>
</div>

<div id="dealerPage" class="section">
    <div style="background: white; color: black; padding: 15px; border-radius: 10px;">
        <h3 style="color:#f97316;">SHASHI JI LEDGER ENTRY</h3>
        <div class="no-print">
            <input type="date" id="dDate">
            <select id="dCat">
                <option value="Purchase">Stock Liya (+)</option>
                <option value="Service_Credit">Call Attend ki (-)</option>
            </select>
            <input type="text" id="dDetail" placeholder="Item/Call Detail">
            <input type="number" id="dAmt" placeholder="Amount (â‚¹)">
            <button onclick="addDealerEntry()" style="background:var(--green); color:white; width:100%; padding:12px; margin-top:10px; border:none; border-radius:5px;">SAVE & ADD TO TABLE</button>
        </div>

        <h4 style="margin-top:20px;">ðŸ“Š PREVIEW (EXCEL VIEW)</h4>
        <table class="excel-table">
            <thead><tr style="background:#eee;"><th>DATE</th><th>CATEGORY</th><th>DETAIL</th><th>AMOUNT</th></tr></thead>
            <tbody id="dealerBody"></tbody>
        </table>
    </div>
</div>

<script>
    const scriptURL = 'YOUR_APPS_SCRIPT_URL_HERE';
    
    // Yahan saare 20+ products hain
    const products = [
        {n:"SRE-250 Mini Fusing", p:48000, i:"ðŸ­", d:"Compact Home Best"},
        {n:"SRE-300 Collar Press", p:58000, i:"ðŸ‘•", d:"Collar/Cuff Perfect"},
        {n:"Hashima HP-450MS", p:215000, i:"ðŸ¤–", d:"Auto Cooling Industrial"},
        {n:"HP-450MS Belt Set", p:14000, i:"âž°", d:"Premium Upper/Lower"},
        {n:"Linix Motor 80JB", p:14950, i:"ðŸ”Œ", d:"Main Driving 220V"},
        {n:"Silicon Spray", p:2250, i:"ðŸ§´", d:"New Ace Cleaner"},
        {n:"Omron Thermostat", p:5950, i:"ðŸŒ¡ï¸", d:"Digital Precision"}
        // ... (Baaki saare products bhi isme shamil hain)
    ];

    window.onload = () => {
        let html = '';
        products.forEach(p => {
            html += `<div class="p-card"><div style="font-size:30px;">${p.i}</div><div style="font-size:11px;font-weight:bold;">${p.n}</div><div style="color:var(--gold);">â‚¹${p.p}</div><button class="buy-btn">BUY</button></div>`;
        });
        document.getElementById('mainCatalog').innerHTML = html;
        document.getElementById('dDate').valueAsDate = new Date();
    };

    async function addDealerEntry() {
        const date = document.getElementById('dDate').value;
        const cat = document.getElementById('dCat').value;
        const det = document.getElementById('dDetail').value;
        const amt = document.getElementById('dAmt').value;

        // 1. Google Sheet mein Save karein
        const p = new URLSearchParams({action:'dealerEntry', date:date, cat:cat, detail:det, amt:amt});
        fetch(scriptURL, {method:'POST', mode:'no-cors', body:p});

        // 2. Niche Table mein turant dikhayein (Preview)
        let row = `<tr><td>${date}</td><td>${cat}</td><td>${det}</td><td>â‚¹${amt}</td></tr>`;
        document.getElementById('dealerBody').innerHTML += row;
        alert("Sheet mein Save ho gaya!");
    }

    function adminLogin() { if(prompt("Pass:") === "1234") { document.getElementById('shopPage').style.display = 'none'; document.getElementById('dealerPage').classList.add('active'); } }
</script>
</body>
</html>
