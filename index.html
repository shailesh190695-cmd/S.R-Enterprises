<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S.R ENTERPRISES | Premium Dashboard</title>
    <style>
        /* üñ§ Premium Black & Gold Theme */
        :root { --bg: #0b1120; --card: #1e293b; --gold: #facc15; --white: #ffffff; }
        
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: var(--white); margin: 0; padding: 0; }
        .container { max-width: 900px; margin: auto; padding: 15px; }

        /* Header */
        .header { text-align: center; border-bottom: 2px solid var(--gold); padding: 30px 0; margin-bottom: 25px; background: linear-gradient(180deg, #1e293b 0%, #0b1120 100%); }
        .header h1 { margin: 0; color: var(--gold); font-size: 28px; letter-spacing: 2px; text-transform: uppercase; }
        .header p { margin: 8px 0; color: #94a3b8; font-weight: bold; font-size: 12px; letter-spacing: 1px; }

        /* Navigation Buttons */
        .nav-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 30px; padding: 0 5px; }
        .nav-btn { background: var(--card); border: 1px solid #334155; padding: 25px; border-radius: 15px; text-align: center; text-decoration: none; color: white; font-weight: bold; transition: 0.3s; box-shadow: 0 10px 20px rgba(0,0,0,0.3); }
        .nav-btn:hover { border-color: var(--gold); transform: translateY(-5px); box-shadow: 0 15px 30px rgba(250, 204, 21, 0.1); }
        .nav-btn span { font-size: 32px; display: block; margin-bottom: 10px; }

        /* Private Lock Screen */
        #lockScreen { text-align: center; margin: 20px 5px; padding: 40px 20px; background: var(--card); border-radius: 20px; border: 1px solid #334155; }
        .btn-gold { background: var(--gold); color: #000; border: none; padding: 15px 30px; border-radius: 10px; font-weight: bold; cursor: pointer; font-size: 16px; width: 100%; max-width: 320px; text-transform: uppercase; transition: 0.3s; }
        .btn-gold:active { transform: scale(0.95); }

        /* Admin Panel Section */
        #adminPanel { display: none; padding: 0 5px; }
        .data-card { background: var(--card); padding: 20px; border-radius: 15px; border: 1px solid #334155; margin-bottom: 25px; }
        
        input, textarea { background: #0f172a; border: 1px solid #334155; color: white; padding: 12px; border-radius: 8px; margin-bottom: 12px; width: 100%; box-sizing: border-box; outline: none; }
        input:focus, textarea:focus { border-color: var(--gold); }
        textarea { height: 100px; resize: none; }

        /* Service History Table */
        .table-container { width: 100%; overflow-x: auto; background: var(--card); border-radius: 15px; border: 1px solid #334155; }
        table { width: 100%; border-collapse: collapse; min-width: 750px; }
        th { background: #1e293b; color: var(--gold); padding: 15px; text-align: left; font-size: 11px; text-transform: uppercase; border-bottom: 2px solid #0f172a; }
        td { padding: 15px; border-bottom: 1px solid #0f172a; font-size: 13px; vertical-align: top; }
        
        .work-log { font-size: 11px; color: #cbd5e1; line-height: 1.6; white-space: pre-line; background: #0f172a; padding: 12px; border-radius: 8px; margin-top: 8px; border: 1px solid #334155; }
        .status-tag { padding: 5px 10px; border-radius: 6px; font-size: 10px; font-weight: bold; text-transform: uppercase; }
        .pending { background: #7f1d1d; color: #fecaca; border: 1px solid #dc2626; }
        .ok { background: #064e3b; color: #d1fae5; border: 1px solid #10b981; }

        @media (max-width: 600px) {
            .nav-grid { grid-template-columns: 1fr; }
            .header h1 { font-size: 22px; }
        }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>S.R ENTERPRISES</h1>
        <p>FUSING MACHINE SPECIALIST | MUMBAI</p>
    </div>

    <div class="nav-grid">
        <a href="bill.html" class="nav-btn">
            <span>üìÑ</span> GENERATE NEW BILL
        </a>
        <a href="https://wa.me/917021733860" class="nav-btn">
            <span>üí¨</span> WHATSAPP CONTACT
        </a>
    </div>

    <div id="lockScreen">
        <div style="font-size: 40px; margin-bottom: 15px;">üîí</div>
        <h3 style="color:var(--gold); margin:0;">PRIVATE ADMIN LOG</h3>
        <p style="font-size:12px; color:#94a3b8; margin: 10px 0 25px 0;">Service history aur spare parts ka hisaab dekhne ke liye unlock karein.</p>
        <button class="btn-gold" onclick="unlockAdmin()">üîì UNLOCK OWNER DASHBOARD</button>
    </div>

    <div id="adminPanel">
        <div class="data-card">
            <h3 style="color:var(--gold); margin-top:0; font-size:18px;">üìù Nayi Visit Entry</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;" id="formGrid">
                <input type="text" id="cName" placeholder="Customer Name">
                <input type="text" id="cMob" placeholder="Mobile Number">
                <input type="text" id="cMach" placeholder="Machine (e.g. Hashima)">
                <input type="date" id="nDate" title="Next Service Date">
            </div>
            <textarea id="wDetails" placeholder="Details: Kya kaam kiya? Kaunsa part dala? Kitne paise liye?"></textarea>
            <input type="number" id="tBill" placeholder="Total Bill (‚Çπ)">
            <button class="btn-gold" style="width:100%;" onclick="saveData()">SAVE RECORD</button>
        </div>

        <input type="text" id="search" onkeyup="filterData()" placeholder="üîç Search Customer, Machine or Date..." style="border: 1px solid var(--gold); padding: 15px;">

        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>Customer & Machine</th>
                        <th>Service History / Spare Parts</th>
                        <th>Amount</th>
                        <th>Next Due</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody id="masterTableBody"></tbody>
            </table>
        </div>
        
        <div style="text-align:center; margin-top:40px; padding-bottom: 40px;">
            <button onclick="location.reload()" style="background:none; border:none; color:#475569; cursor:pointer; font-size:12px; font-weight:bold;">üîí LOGOUT & LOCK DATA</button>
        </div>
    </div>
</div>



<script>
    function unlockAdmin() {
        let pin = prompt("Owner PIN daalein:");
        if (pin === "7860") {
            document.getElementById('lockScreen').style.display = 'none';
            document.getElementById('adminPanel').style.display = 'block';
            loadData();
        } else {
            alert("Galat PIN!");
        }
    }

    function saveData() {
        const entry = {
            name: document.getElementById('cName').value,
            mob: document.getElementById('cMob').value,
            mach: document.getElementById('cMach').value,
            work: document.getElementById('wDetails').value,
            bill: document.getElementById('tBill').value,
            next: document.getElementById('nDate').value,
            date: new Date().toLocaleDateString('en-GB')
        };

        if(!entry.name || !entry.next) return alert("Name aur Next Date zaroori hai!");

        let db = JSON.parse(localStorage.getItem('srMasterDB')) || [];
        db.push(entry);
        localStorage.setItem('srMasterDB', JSON.stringify(db));
        
        alert("Entry Saved Successfully!");
        loadData();
        
        // Reset inputs
        document.getElementById('cName').value = '';
        document.getElementById('cMob').value = '';
        document.getElementById('wDetails').value = '';
        document.getElementById('tBill').value = '';
    }

    function loadData() {
        let db = JSON.parse(localStorage.getItem('srMasterDB')) || [];
        let html = '';
        let today = new Date().toISOString().split('T')[0];

        db.reverse().forEach((item, index) => {
            let statusClass = (item.next < today) ? 'pending' : 'ok';
            let statusText = (item.next < today) ? '‚ö†Ô∏è OVERDUE' : '‚úÖ ON TRACK';

            html += `
                <tr>
                    <td>
                        <b style="color:var(--gold); font-size:14px;">${item.name}</b><br>
                        <small style="color:#94a3b8;">${item.mach}</small><br>
                        <small>${item.mob}</small>
                    </td>
                    <td>
                        <div style="font-size:10px; color:var(--gold); font-weight:bold;">Visit: ${item.date}</div>
                        <div class="work-log">${item.work || 'Details not added.'}</div>
                    </td>
                    <td style="font-weight:bold; color:var(--white); font-size:15px;">‚Çπ${item.bill || '0'}</td>
                    <td>
                        <span class="status-tag ${statusClass}">${item.next}</span><br>
                        <small style="font-size:9px; display:block; margin-top:5px; color:#94a3b8;">${statusText}</small>
                    </td>
                    <td>
                        <button onclick="deleteEntry(${index})" style="background:none; border:none; color:#ef4444; cursor:pointer; font-size:20px;">üóëÔ∏è</button>
                    </td>
                </tr>
            `;
        });
        document.getElementById('masterTableBody').innerHTML = html;
    }

    function filterData() {
        let val = document.getElementById('search').value.toLowerCase();
        let rows = document.getElementById('masterTableBody').getElementsByTagName('tr');
        for (let row of rows) {
            row.style.display = row.innerText.toLowerCase().includes(val) ? '' : 'none';
        }
    }

    function deleteEntry(i) {
        if(confirm("Record delete karein?")) {
            let db = JSON.parse(localStorage.getItem('srMasterDB'));
            db.splice(db.length - 1 - i, 1);
            localStorage.setItem('srMasterDB', JSON.stringify(db));
            loadData();
        }
    }
</script>
</body>
</html>
