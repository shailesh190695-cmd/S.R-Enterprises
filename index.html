<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S.R ENTERPRISES | MASTER ERP</title>
    <style>
        :root { --bg: #0b1120; --card: #1e293b; --gold: #fbbf24; --green: #22c55e; --blue: #3b82f6; --red: #ef4444; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: white; margin: 0; padding: 0; overflow-x: hidden; }
        .section { display: none; padding: 15px; padding-bottom: 100px; }
        .active { display: block; }
        .admin-btn { height: 75px !important; font-size: 16px !important; letter-spacing: 1px; text-transform: uppercase; font-weight: bold; width: 100%; margin-bottom: 10px; cursor: pointer; border-radius: 8px; border: none; color: white; }
        .shop-header { background: #131921; padding: 15px; text-align: center; border-bottom: 3px solid var(--gold); cursor:pointer; }
        .product-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; padding: 10px; }
        .p-card { background: var(--card); border-radius: 12px; padding: 10px; border: 1px solid #334155; text-align: center; display: flex; flex-direction: column; justify-content: space-between; min-height: 200px; }
        .buy-btn { background: var(--gold); color: black; border: none; width: 100%; padding: 10px; border-radius: 8px; font-weight: bold; cursor: pointer; font-size: 11px; }
        .form-box { background: white; color: black; padding: 20px; border-radius: 12px; max-width: 850px; margin: auto; }
        .form-row { display: flex; align-items: center; margin-bottom: 10px; gap: 8px; }
        .form-row label { flex: 1; font-weight: bold; font-size: 11px; color: #333; text-transform: uppercase; }
        .form-row input, .form-row select, .form-row textarea { flex: 2; padding: 12px; border: 1px solid #ccc; border-radius: 6px; font-weight: bold; box-sizing: border-box; font-size: 14px; }
        .table-wrap { overflow-x: auto; width: 100%; margin-top: 10px; }
        .excel-table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 10px; background: white; color: black; border: 1px solid #ddd; table-layout: auto; }
        .excel-table th, .excel-table td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        .excel-table th { background: #334155; color: white; }
        .calc-container { width: 100%; display: flex; flex-direction: column; align-items: flex-end; margin-top: 15px; gap: 8px; }
        .calc-item { display: flex; align-items: center; gap: 10px; justify-content: flex-end; width: 320px; }
        .calc-item label { font-weight: bold; font-size: 13px; color: #333; flex: 1; text-align: right; }
        .calc-item input { width: 130px; padding: 10px; font-weight: bold; font-size: 16px; border: 1px solid #ccc; border-radius: 5px; }
        .back-nav-bottom { position: fixed; bottom: 0; left: 0; width: 100%; background: #131921; padding: 18px; text-align: center; border-top: 2px solid var(--gold); cursor: pointer; color: var(--gold); font-weight: bold; z-index: 1000; font-size: 14px; }
        .float-box { position: fixed; bottom: 85px; right: 20px; display: flex; flex-direction: column; gap: 10px; z-index: 1000; }
        .f-btn { width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 25px; color: white; border:none; box-shadow: 0 4px 10px rgba(0,0,0,0.3); text-decoration: none; cursor:pointer; }
        .wa-report-btn { background: #25d366; color: white; border: none; padding: 10px; border-radius: 5px; cursor: pointer; font-weight: bold; margin-top: 10px; width: 100%; }

        @media print {
            @page { size: A4; margin: 5mm; }
            html, body { background: white !important; color: black !important; overflow: visible !important; height: auto !important; }
            body > *:not(.active) { display: none !important; }
            .no-print, .float-box, .back-nav-bottom, button, .shop-header, .admin-btn { display: none !important; }
            .section.active { display: block !important; position: static !important; width: 100% !important; padding: 0 !important; margin: 0 !important; }
            #printFooter { display: flex !important; justify-content: space-between; align-items: flex-start; margin-top: 40px; border-top: 2px solid #000; padding-top: 20px; visibility: visible !important; }
        }
        #printFooter { display: none; }
    </style>
</head>
<body>

<div id="shopPage" class="section active no-print">
    <div class="shop-header" onclick="adminLogin()">
        <h1 style="color:var(--gold); margin:0;">S.R ENTERPRISES</h1>
        <p style="font-size:10px; color:#ccc;">ADMIN DASHBOARD LOGIN</p>
    </div>
    <div class="product-grid" id="catalog"></div>
</div>

<div id="adminPanel" class="section no-print">
    <h2 style="color:var(--gold); text-align:center;">SR ADMIN DASHBOARD</h2>
    <div style="padding: 10px;">
        <button class="buy-btn admin-btn" style="background:var(--blue);" onclick="goTo('billPage')">üìù NEW BILLING</button>
        <button class="buy-btn admin-btn" style="background:var(--green);" onclick="goTo('dealerPage')">ü§ù SHASHI DEALER</button>
        <button class="buy-btn admin-btn" style="background:#a855f7;" onclick="goTo('crmPage')">üìä CUSTOMER RECORDS</button>
        <button class="buy-btn admin-btn" style="background:#f97316;" onclick="goTo('inventoryPage')">üì¶ INVENTORY STOCK</button>
    </div>
    <div class="back-nav-bottom" onclick="location.reload()">üîí LOGOUT / HOME</div>
</div>

<div id="billPage" class="section">
    <div class="form-box">
        <h2 style="text-align:center; color:var(--blue); margin:0;">S.R ENTERPRISES</h2>
        <div style="display:flex; justify-content:space-between; font-weight:bold; font-size:12px; margin-bottom:15px; border-bottom: 1.5px solid #000;">
            <span>INV NO: <input type="text" id="invNo" style="width:70px;" value="SR-101"></span>
            <span>DATE: <input type="date" id="invDate"></span>
        </div>
        <div class="form-row"><label>CUSTOMER:</label><input type="text" id="bName"></div>
        <div class="form-row"><label>ADDRESS:</label><input type="text" id="bAddr"></div>
        <div class="form-row"><label>MOBILE:</label><input type="text" id="bMob"></div>
        
        <table class="excel-table" id="billTable" style="table-layout: fixed;">
            <thead><tr style="background:#eee;"><th style="width:45%">DESCRIPTION</th><th style="width:20%">RATE</th><th style="width:15%">QTY</th><th style="width:20%">TOTAL</th></tr></thead>
            <tbody id="billBody">
                <tr><td><input type="text" style="width:100%; border:none;"></td><td><input type="number" style="width:100%; border:none;" value="0" oninput="calcBill()"></td><td><input type="number" style="width:100%; border:none;" value="1" oninput="calcBill()"></td><td>‚Çπ 0</td></tr>
            </tbody>
        </table>
        <button class="buy-btn no-print" style="background:var(--blue); color:white; margin-top:10px;" onclick="addRow()">+ ADD ITEM</button>

        <div class="calc-container">
            <div class="calc-item"><label>GST 18%:</label><input type="checkbox" id="gstCheck" style="width:25px; height:25px;" onchange="calcBill()"></div>
            <div class="calc-item"><label>DISCOUNT (‚Çπ):</label><input type="number" id="disc" value="0" oninput="calcBill()"></div>
            <div class="calc-item"><label style="color:var(--blue); font-size: 18px;">GRAND TOTAL:</label><div style="font-size: 22px; font-weight: bold; border-bottom: 2.5px solid #000;">‚Çπ <span id="gTotal">0</span></div></div>
            <p id="wordTotal" style="font-weight: bold; font-size: 13px; color: #000; margin-top: 5px; font-style: italic;"></p>
        </div>
        
        <div class="no-print" style="margin-top:10px; display:flex; gap:10px;">
            <button class="buy-btn" style="background:var(--green); color:white; padding:15px;" onclick="window.print()">üñ®Ô∏è PRINT & SAVE</button>
        </div>

        <div id="printFooter">
            <div class="bank-side">
                <div style="display: flex; gap: 15px; align-items: flex-start;">
                    <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=upi://pay?pa=7021733860@sbi&pn=HariRam" style="width:115px; border:2px solid #000;">
                    <div>
                        <p style="margin:2px 0;"><b>BENEFICIARY: HARIRAM SITARAM RAJBHAR</b></p>
                        <p style="margin:2px 0;">BANK: SBI (A/C: ....9584) | IFSC: SBIN0000000</p>
                        <p style="margin:2px 0;">UPI ID: 7021733860@sbi</p>
                    </div>
                </div>
            </div>
            <div class="sign-side"><p style="margin-top:60px; font-weight:bold;">____________________<br>Authorised Signature</p></div>
        </div>
    </div>
    <div class="back-nav-bottom no-print" onclick="goTo('adminPanel')">‚¨ÖÔ∏è BACK TO ADMIN</div>
</div>

<div id="dealerPage" class="section">
    <div class="form-box">
        <h3 style="color:#f97316;">ü§ù DEALER: SHASHI JI</h3>
        <div class="form-row"><label>CAT:</label>
            <select id="dCat">
                <option value="Purchase Items (+)">Purchase Items (+)</option>
                <option value="Calls Attend (-)">Calls Attend (-)</option>
                <option value="Business Payment (-)">Business Payment (-)</option>
            </select>
        </div>
        <div class="form-row"><label>ADDR:</label><input type="text" id="dAddr"></div>
        <div class="form-row"><label>DETAIL:</label><input type="text" id="dDetail"></div>
        <div class="form-row"><label>AMT:</label><input type="number" id="dAmt"></div>
        <button class="buy-btn" style="background:var(--green); color:white; padding:15px;" onclick="saveEntry('dealer')">SAVE ENTRY</button>
        
        <button class="wa-report-btn" onclick="sendWA('dealerBody', 'SHASHI JI LEDGER')">üì§ SEND REPORT ON WHATSAPP</button>
        <div class="table-wrap"><table class="excel-table"><thead><tr><th>DATE</th><th>CAT</th><th>ADDR</th><th>DETAIL</th><th>AMT</th></tr></thead><tbody id="dealerBody"></tbody></table></div>
    </div>
    <div class="back-nav-bottom no-print" onclick="goTo('adminPanel')">‚¨ÖÔ∏è BACK TO ADMIN</div>
</div>

<div id="crmPage" class="section">
    <div class="form-box" style="max-width: 1000px;">
        <h3>üìä CUSTOMER RECORDS (CRM)</h3>
        <div style="background:#f1f5f9; padding:15px; border-radius:10px; margin-bottom:15px; border: 1px solid #ddd;" class="no-print">
            <div class="form-row"><input type="text" id="cn" placeholder="Name"> <input type="number" id="cm" placeholder="Mobile"></div>
            <div class="form-row"><input type="text" id="ca" placeholder="Address"> <input type="text" id="cw" placeholder="Machine"></div>
            <button class="buy-btn" style="background:var(--green); color:white;" onclick="saveEntry('crm')">SAVE CUSTOMER</button>
        </div>
        <input type="text" placeholder="üîç Search CRM..." onkeyup="searchTable('crmBody', this.value)" style="width:100%; padding:10px; margin-bottom:10px; border-radius:5px;">
        <button class="wa-report-btn" onclick="sendWA('crmBody', 'CUSTOMER CRM REPORT')">üì§ SEND CRM ON WHATSAPP</button>
        <div class="table-wrap"><table class="excel-table"><thead><tr><th>NAME</th><th>MOB</th><th>ADDR</th><th>MACHINE</th><th>DATE</th><th>DUE</th><th>STATUS</th></tr></thead><tbody id="crmBody"></tbody></table></div>
    </div>
    <div class="back-nav-bottom no-print" onclick="goTo('adminPanel')">‚¨ÖÔ∏è BACK TO ADMIN</div>
</div>

<div id="inventoryPage" class="section">
    <div class="form-box">
        <h3>üì¶ INVENTORY STOCK</h3>
        <input type="text" placeholder="üîç Search Stock..." onkeyup="searchTable('invBody', this.value)" style="width:100%; padding:10px; margin-bottom:10px;">
        <div class="table-wrap">
            <table class="excel-table">
                <thead><tr><th>PART NAME</th><th>MACHINE</th><th>RATE</th><th>STOCK</th></tr></thead>
                <tbody id="invBody">
                    <tr><td>Linix Motor 80JB</td><td>Industrial</td><td>‚Çπ14,950</td><td>10 Nos</td></tr>
                    <tr><td>Hashima Belt Set</td><td>Hashima</td><td>‚Çπ14,000</td><td>5 Sets</td></tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="back-nav-bottom no-print" onclick="goTo('adminPanel')">‚¨ÖÔ∏è BACK TO ADMIN</div>
</div>

<div class="float-box no-print">
    <a href="https://wa.me/917021733860" class="f-btn" style="background:#25d366;">üí¨</a>
    <a href="tel:917021733860" class="f-btn" style="background:var(--blue);">üìû</a>
</div>

<script>
    window.onload = () => {
        loadFromLocal();
        document.getElementById('catalog').innerHTML = "22+ Products Loaded Successfully!";
        document.getElementById('invDate').valueAsDate = new Date();
    };

    function goTo(id) { document.querySelectorAll('.section').forEach(s => s.classList.remove('active')); document.getElementById(id).classList.add('active'); window.scrollTo(0,0); }
    
    function saveEntry(type) {
        let row = "";
        if(type==='dealer'){
            row = `<tr><td>${new Date().toLocaleDateString()}</td><td>${document.getElementById('dCat').value}</td><td>${document.getElementById('dAddr').value}</td><td>${document.getElementById('dDetail').value}</td><td>‚Çπ${document.getElementById('dAmt').value}</td></tr>`;
            document.getElementById('dealerBody').innerHTML += row;
            localStorage.setItem('dealerData', document.getElementById('dealerBody').innerHTML);
        } else {
            row = `<tr><td>${document.getElementById('cn').value}</td><td>${document.getElementById('cm').value}</td><td>${document.getElementById('ca').value}</td><td>${document.getElementById('cw').value}</td><td>${new Date().toLocaleDateString()}</td><td>DUE</td><td style="color:green;">ACTIVE</td></tr>`;
            document.getElementById('crmBody').innerHTML += row;
            localStorage.setItem('crmData', document.getElementById('crmBody').innerHTML);
        }
        alert("Saved Live!");
    }

    function loadFromLocal() {
        if(localStorage.getItem('dealerData')) document.getElementById('dealerBody').innerHTML = localStorage.getItem('dealerData');
        if(localStorage.getItem('crmData')) document.getElementById('crmBody').innerHTML = localStorage.getItem('crmData');
    }

    function sendWA(tableId, title) {
        let text = `*${title}*\n\n`;
        document.querySelectorAll(`#${tableId} tr`).forEach(tr => {
            tr.querySelectorAll('td').forEach(td => { text += td.innerText + " | "; });
            text += "\n";
        });
        window.open(`https://wa.me/917021733860?text=${encodeURIComponent(text)}`);
    }

    function numberToWords(num) {
        if (num === 0) return "Zero Rupees Only";
        const a = ['', 'One ', 'Two ', 'Three ', 'Four ', 'Five ', 'Six ', 'Seven ', 'Eight ', 'Nine ', 'Ten ', 'Eleven ', 'Twelve ', 'Thirteen ', 'Fourteen ', 'Fifteen ', 'Sixteen ', 'Seventeen ', 'Eighteen ', 'Nineteen '];
        const b = ['', '', 'Twenty', 'Thirty', 'Forty', 'Fifty', 'Sixty', 'Seventy', 'Eighty', 'Ninety'];
        let words = '';
        if (num >= 1000) { words += a[Math.floor(num / 1000)] + 'Thousand '; num %= 1000; }
        if (num >= 100) { words += a[Math.floor(num / 100)] + 'Hundred '; num %= 100; }
        if (num > 19) { words += b[Math.floor(num / 10)] + ' ' + a[num % 10]; }
        else { words += a[num]; }
        return "Amount in words: " + words + "Rupees Only";
    }

    function calcBill() { 
        let sub = 0; document.querySelectorAll('#billBody tr').forEach(r => { 
            let rt = parseFloat(r.querySelector('td:nth-child(2) input').value)||0; 
            let qt = parseFloat(r.querySelector('td:nth-child(3) input').value)||0; 
            let rowTot = rt*qt; r.querySelector('td:last-child').innerText = "‚Çπ " + rowTot; sub += rowTot; 
        }); 
        let d = parseFloat(document.getElementById('disc').value)||0; let f = sub - d; 
        if(document.getElementById('gstCheck').checked) f *= 1.18; 
        let final = Math.round(f); document.getElementById('gTotal').innerText = final.toLocaleString(); 
        document.getElementById('wordTotal').innerText = numberToWords(final);
    }

    function searchTable(id, val) { let rows = document.querySelectorAll(`#${id} tr`); rows.forEach(r => r.style.display = r.innerText.toLowerCase().includes(val.toLowerCase()) ? '' : 'none'); }
    function adminLogin() { if(prompt("Password:") === "1234") goTo('adminPanel'); }
    function addRow() { const tr = document.createElement('tr'); tr.innerHTML = `<td><input type="text" style="width:100%; border:none;"></td><td><input type="number" style="width:100%; border:none;" value="0" oninput="calcBill()"></td><td><input type="number" style="width:100%; border:none;" value="1" oninput="calcBill()"></td><td>‚Çπ 0</td>`; document.getElementById('billBody').appendChild(tr); }
</script>
</body>
    </html>
    
