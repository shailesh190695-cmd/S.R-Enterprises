<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S.R ENTERPRISES | AI ERP</title>
    <style>
        :root { --bg: #0b1120; --card: #1e293b; --gold: #fbbf24; --green: #22c55e; --red: #ef4444; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: white; margin: 0; padding: 10px; }
        .header { text-align: center; border-bottom: 2px solid var(--gold); padding: 10px; cursor: pointer; }
        .menu-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 20px 0; }
        .btn-menu { padding: 20px; border-radius: 12px; border: none; font-weight: bold; cursor: pointer; color: white; }
        .section { display: none; background: #1e293b; padding: 20px; border-radius: 15px; border: 1px solid #334155; }
        .active { display: block; }
        .form-group { margin-bottom: 12px; }
        .form-group label { display: block; color: var(--gold); font-size: 11px; font-weight: bold; margin-bottom: 5px; }
        input, select { width: 100%; padding: 12px; border-radius: 8px; border: 1px solid #475569; background: white; color: black; font-weight: bold; }
        .mic-btn { background: var(--red); border: none; border-radius: 50%; width: 40px; height: 40px; color: white; cursor: pointer; font-size: 18px; }
        .flex-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; border-bottom: 1px solid #444; padding-bottom: 10px; }
        #voiceStatus { color: var(--green); font-size: 10px; font-weight: bold; text-align: center; display: none; margin-bottom: 10px; }
        @media print { .no-print { display: none !important; } .section { display: block !important; background: white; color: black; border: none; } }
    </style>
</head>
<body>

<div class="header" onclick="unlockAdmin()">
    <h1 style="color:var(--gold); margin:0;">S.R ENTERPRISES</h1>
    <p id="hint" style="font-size:10px; color:#94a3b8;">Click for AI Admin Panel</p>
</div>

<div id="dashboard" class="no-print">
    <div class="menu-grid">
        <button class="btn-menu" style="background:var(--gold);" onclick="showSection('billPage')">üßæ NEW BILL</button>
        <button class="btn-menu" style="background:#a855f7;" onclick="showSection('invPage')">üì¶ STOCK</button>
        <button class="btn-menu" style="background:#f97316;" onclick="showSection('dealerPage')">ü§ù DEALER</button>
        <button class="btn-menu" style="background:var(--green);" onclick="window.open('https://wa.me/919326113988')">üì≤ WHATSAPP</button>
    </div>
</div>

<div id="adminArea" style="display:none;">
    <div id="voiceStatus">üéôÔ∏è Listening... Speak Now</div>

    <div id="billPage" class="section active">
        <div class="flex-header">
            <h3 style="color:var(--gold); margin:0;">BILLING FORM</h3>
            <button class="mic-btn no-print" onclick="startAI('bill')">üéôÔ∏è</button>
        </div>
        <div class="form-group"><label>Customer Name:</label><input type="text" id="cName"></div>
        <div class="form-group"><label>Mobile:</label><input type="text" id="cMob"></div>
        <div class="form-group"><label>Service Price:</label><input type="number" id="servPrice" value="0" oninput="calc()"></div>
        <div class="form-group"><label>Spare Price:</label><input type="number" id="sparePrice" value="0" oninput="calc()"></div>
        <h2 style="text-align:center; color:var(--gold);">TOTAL: ‚Çπ <span id="grand">0</span></h2>
        <button class="no-print" style="width:100%; padding:15px; background:var(--green); color:white; font-weight:bold; border:none; border-radius:10px;" onclick="saveBill()">SAVE & WHATSAPP</button>
    </div>

    <div id="invPage" class="section">
        <div class="flex-header">
            <h3 style="color:#a855f7; margin:0;">STOCK UPDATE</h3>
            <button class="mic-btn no-print" onclick="startAI('stock')">üéôÔ∏è</button>
        </div>
        <div class="form-group"><label>Item Name:</label><input type="text" id="iName"></div>
        <div class="form-group"><label>Qty:</label><input type="number" id="iQty"></div>
        <div class="form-group"><label>Sale Price:</label><input type="number" id="iSale"></div>
        <button style="width:100%; background:#a855f7; padding:12px; border:none; font-weight:bold; border-radius:10px; color:white;" onclick="saveStock()">ADD STOCK</button>
    </div>

    <div id="dealerPage" class="section">
        <div class="flex-header">
            <h3 style="color:#f97316; margin:0;">DEALER HISAB</h3>
            <button class="mic-btn no-print" onclick="startAI('dealer')">üéôÔ∏è</button>
        </div>
        <div class="form-group"><label>Type:</label><select id="dType"><option value="Purchase">Purchase (+)</option><option value="Payment">Payment (-)</option><option value="Service_Work">Service Work (Minus)</option></select></div>
        <div class="form-group"><label>Amount:</label><input type="number" id="dAmt"></div>
        <div class="form-group"><label>Detail:</label><input type="text" id="dDetail"></div>
        <button style="width:100%; background:var(--gold); padding:12px; border:none; font-weight:bold; border-radius:10px;" onclick="saveDealer()">SAVE ENTRY</button>
    </div>
</div>

<script>
    const scriptURL = 'https://script.google.com/macros/s/AKfycbzXvTSibdzC-ETdc5c3GD7RD1gwD4_xLWpBmQR4gMzpxZfZbAwLt5Wewzt3osDfTgUf/exec';

    function unlockAdmin() {
        if(prompt("Password:") === "1234") {
            document.getElementById('adminArea').style.display = 'block';
            document.getElementById('hint').innerText = "AI ADMIN LOGGED IN ‚úÖ";
        }
    }

    function showSection(id) {
        document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
    }

    // --- AI VOICE LOGIC ---
    function startAI(type) {
        const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
        recognition.lang = 'hi-IN';
        document.getElementById('voiceStatus').style.display = 'block';
        
        recognition.onresult = function(event) {
            const text = event.results[0][0].transcript.toLowerCase();
            document.getElementById('voiceStatus').style.display = 'none';
            const nums = text.match(/\d+/g);

            if(type === 'bill') {
                if(text.includes("‡§®‡§æ‡§Æ")) document.getElementById('cName').value = text.split("‡§®‡§æ‡§Æ")[1].trim().split(" ")[0];
                if(nums) {
                    if(nums[0].length >= 10) document.getElementById('cMob').value = nums[0];
                    else document.getElementById('servPrice').value = nums[0];
                    if(nums[1]) document.getElementById('sparePrice').value = nums[1];
                }
                calc();
            } else if(type === 'stock') {
                if(text.includes("‡§Ü‡§á‡§ü‡§Æ")) document.getElementById('iName').value = text.split("‡§Ü‡§á‡§ü‡§Æ")[1].trim().split(" ")[0];
                if(nums) {
                    document.getElementById('iQty').value = nums[0];
                    if(nums[1]) document.getElementById('iSale').value = nums[1];
                }
            } else if(type === 'dealer') {
                if(nums) document.getElementById('dAmt').value = nums[0];
                if(text.includes("‡§°‡§ø‡§ü‡•á‡§≤")) document.getElementById('dDetail').value = text.split("‡§°‡§ø‡§ü‡•á‡§≤")[1].trim();
            }
        };
        recognition.start();
    }

    function calc() {
        let s = parseFloat(document.getElementById('servPrice').value) || 0;
        let p = parseFloat(document.getElementById('sparePrice').value) || 0;
        document.getElementById('grand').innerText = (s + p);
    }

    // Save Functions (Same as before)
    function saveBill() { alert("Saving Bill..."); }
    function saveDealer() { alert("Dealer Entry Saved!"); }
    function saveStock() { alert("Stock Updated!"); }
</script>
</body>
                                                       </html>
                                                       
